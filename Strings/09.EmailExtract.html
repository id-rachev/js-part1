<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Email Extract</title>
    <link href="styles/js-console.css" rel="stylesheet" />
</head>
<body>
    <div id="js-console"></div>
    <script src="scripts/js-console.js"></script>
    <script>
        // Write a function for extracting all email addresses from given text.
        // All substrings that match the format <identifier>@<host>…<domain> 
        // should be recognized as emails. Return the emails as array of strings.

        var myText = 'My personal e-mail is dedov@mail.bg, but you can write me at iya@gmail.com.';
        
        jsConsole.writeLine(myText);

        function extractEmails(myText) {
            myText = myText.replace(/\,/g, '');
            var splitted = myText.split(' ');
            var eMails = [];

            var lengthSpl = splitted.length;

            for (var i = 0; i < lengthSpl; i++) {
                var mail = splitted[i];
                var mailLength = mail.length;
                var atPos = mail.indexOf('@');
                var dotPos = mail.lastIndexOf('.');

                if ((atPos != -1) && (dotPos != -1)) {

                    if (dotPos == mail.length - 1) {
                        eMails.push(mail.substr(0, mailLength - 1));
                    }
                    else {
                        eMails.push(mail);
                    }
                }
            }
            return eMails;
        }

        var eMails = extractEmails(myText);

        for (var index in eMails) {

            jsConsole.writeLine(eMails[index]);
        }
    </script>
</body>
</html>
